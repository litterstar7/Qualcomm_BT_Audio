<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Trap API: CAPACITIVE_SENSOR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Trap API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__trapset__capacitive__sensor.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CAPACITIVE_SENSOR<div class="ingroups"><a class="el" href="group__api.html">Customer Trap API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8354fbaca060d3891ef35195d80b44c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__capacitive__sensor.html#ga8354fbaca060d3891ef35195d80b44c8">CapacitiveSensorConfigureMultiPad</a> (uint16 count, const uint16 *pads, const CAPACITIVE_SENSOR_PAD_CONFIG *common_config)</td></tr>
<tr class="memdesc:ga8354fbaca060d3891ef35195d80b44c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure a set of CapacitiveSensor channels This call enables the common parameters of a set of CapacitiveSensor channels (perhaps all of them) to be set in the hardware.  <a href="#ga8354fbaca060d3891ef35195d80b44c8">More...</a><br /></td></tr>
<tr class="separator:ga8354fbaca060d3891ef35195d80b44c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga760829d324ccb2b73483d609fd74507d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__capacitive__sensor.html#ga760829d324ccb2b73483d609fd74507d">CapacitiveSensorConfigureTouchOffset</a> (uint16 pad, uint32 touch_offset)</td></tr>
<tr class="memdesc:ga760829d324ccb2b73483d609fd74507d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the touch offset for a CapacitiveSensor channel. This call sets the touch offset for a specific CapacitiveSensor channel. This is meant to be used by the APP to take out the capacitance added by a touch to avoid the situation where a long touch eventually becomes part of the background from the point of view of the background capacitance tracker. Please note that this value is subtracted from the reading.  <a href="#ga760829d324ccb2b73483d609fd74507d">More...</a><br /></td></tr>
<tr class="separator:ga760829d324ccb2b73483d609fd74507d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0531bd5985108bab77f092bee5bf431b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__capacitive__sensor.html#ga0531bd5985108bab77f092bee5bf431b">CapacitiveSensorEnablePads</a> (uint16 count, const uint16 *pads, const CAPACITIVE_SENSOR_PAD_LEVELS *pad_levels)</td></tr>
<tr class="memdesc:ga0531bd5985108bab77f092bee5bf431b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the supplied set of CapacitiveSensor pads To enable a channel, it is necessary to supply a "preload" value, which should be as close as possible to the "natural" capacitance of the pad, plus on- and off-trigger levels, which contain the change in the measured capacitance (i.e. current level - background level) to indicate respectively a touch-on when there is currently no detected touch, and a touch-off when there is currently a detected touch. PIO setup is not handled by this trap but can be done at any point. XIO pads need to be configured as analogue pins. This is done by using PioSetMapPins32Bank to put the PIO under HW control and then PioSetFunction to set the function to XIO_ANALOGUE.  <a href="#ga0531bd5985108bab77f092bee5bf431b">More...</a><br /></td></tr>
<tr class="separator:ga0531bd5985108bab77f092bee5bf431b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea8baadce952c8f9876d86106b365a30"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__capacitive__sensor.html#gaea8baadce952c8f9876d86106b365a30">CapacitiveSensorPadQuery</a> (uint16 count, const uint16 *pads, capacitive_sensor_pad_state *results)</td></tr>
<tr class="memdesc:gaea8baadce952c8f9876d86106b365a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current status of the capacitive touch pads. The current state of each of the pads will be written to the corresponding element of the results array.  <a href="#gaea8baadce952c8f9876d86106b365a30">More...</a><br /></td></tr>
<tr class="separator:gaea8baadce952c8f9876d86106b365a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaffc8caabb097d99af8a9a02afdf58428"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__capacitive__sensor.html#gaffc8caabb097d99af8a9a02afdf58428">CapacitiveSensorShieldEnable</a> (bool enable)</td></tr>
<tr class="memdesc:gaffc8caabb097d99af8a9a02afdf58428"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/Disable CapacitiveSensor shield on XIO11. Enabling the shield causes the capacitance seen on XIO11 to be subtracted from the capacitance measured on all the other XIOs. This is done in hardware prior to sampling thus preserving ADC range. The purpose for this is to remove any stray capacitance from the other XIOs. Please note that XIO11 should not be used for any other operations when the shield is enabled. Also, XIO11 should be set up in analogue mode prior to enabling the shield.  <a href="#gaffc8caabb097d99af8a9a02afdf58428">More...</a><br /></td></tr>
<tr class="separator:gaffc8caabb097d99af8a9a02afdf58428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9ce6244fcd40464128f6f11aa98c2a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="message___8h.html#a51d7b6544fb734b892b35ce3f56a579a">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__capacitive__sensor.html#gac9ce6244fcd40464128f6f11aa98c2a8">MessageCapacitiveSensorTask</a> (<a class="el" href="message___8h.html#a51d7b6544fb734b892b35ce3f56a579a">Task</a> task)</td></tr>
<tr class="memdesc:gac9ce6244fcd40464128f6f11aa98c2a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a task to handle touch sensor messages.  <a href="#gac9ce6244fcd40464128f6f11aa98c2a8">More...</a><br /></td></tr>
<tr class="separator:gac9ce6244fcd40464128f6f11aa98c2a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8354fbaca060d3891ef35195d80b44c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8354fbaca060d3891ef35195d80b44c8">&#9670;&nbsp;</a></span>CapacitiveSensorConfigureMultiPad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CapacitiveSensorConfigureMultiPad </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16 *&#160;</td>
          <td class="paramname"><em>pads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CAPACITIVE_SENSOR_PAD_CONFIG *&#160;</td>
          <td class="paramname"><em>common_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure a set of CapacitiveSensor channels This call enables the common parameters of a set of CapacitiveSensor channels (perhaps all of them) to be set in the hardware. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>Number of pads to be configured </td></tr>
    <tr><td class="paramname">pads</td><td>List of <code>count</code> pads to be configured </td></tr>
    <tr><td class="paramname">common_config</td><td>Pointer to a single <code>CAPACITIVE_SENSOR_PAD_CONFIG</code> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns TRUE if configuration was successful </dd></dl>

</div>
</div>
<a id="ga760829d324ccb2b73483d609fd74507d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga760829d324ccb2b73483d609fd74507d">&#9670;&nbsp;</a></span>CapacitiveSensorConfigureTouchOffset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CapacitiveSensorConfigureTouchOffset </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>pad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>touch_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the touch offset for a CapacitiveSensor channel. This call sets the touch offset for a specific CapacitiveSensor channel. This is meant to be used by the APP to take out the capacitance added by a touch to avoid the situation where a long touch eventually becomes part of the background from the point of view of the background capacitance tracker. Please note that this value is subtracted from the reading. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pad</td><td>Pad to be configured </td></tr>
    <tr><td class="paramname">touch_offset</td><td>Touch offset value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns TRUE if configuration was successful </dd></dl>

</div>
</div>
<a id="ga0531bd5985108bab77f092bee5bf431b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0531bd5985108bab77f092bee5bf431b">&#9670;&nbsp;</a></span>CapacitiveSensorEnablePads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CapacitiveSensorEnablePads </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16 *&#160;</td>
          <td class="paramname"><em>pads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CAPACITIVE_SENSOR_PAD_LEVELS *&#160;</td>
          <td class="paramname"><em>pad_levels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the supplied set of CapacitiveSensor pads To enable a channel, it is necessary to supply a "preload" value, which should be as close as possible to the "natural" capacitance of the pad, plus on- and off-trigger levels, which contain the change in the measured capacitance (i.e. current level - background level) to indicate respectively a touch-on when there is currently no detected touch, and a touch-off when there is currently a detected touch. PIO setup is not handled by this trap but can be done at any point. XIO pads need to be configured as analogue pins. This is done by using PioSetMapPins32Bank to put the PIO under HW control and then PioSetFunction to set the function to XIO_ANALOGUE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>Number of pads to be enabled </td></tr>
    <tr><td class="paramname">pads</td><td>List of <code>count</code> pads to be enabled </td></tr>
    <tr><td class="paramname">pad_levels</td><td>Array of <code>count</code> <code>CAPACITIVE_SENSOR_PAD_LEVELS</code>, containing the preload and trigger levels for each pad to be enabled </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns TRUE if enabling was successful </dd></dl>

</div>
</div>
<a id="gaea8baadce952c8f9876d86106b365a30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea8baadce952c8f9876d86106b365a30">&#9670;&nbsp;</a></span>CapacitiveSensorPadQuery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CapacitiveSensorPadQuery </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16 *&#160;</td>
          <td class="paramname"><em>pads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">capacitive_sensor_pad_state *&#160;</td>
          <td class="paramname"><em>results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current status of the capacitive touch pads. The current state of each of the pads will be written to the corresponding element of the results array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>The number of pad states to read. </td></tr>
    <tr><td class="paramname">pads</td><td>count values each specifying a pad. </td></tr>
    <tr><td class="paramname">results</td><td>count values to be written to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if successful, else FALSE. </dd></dl>

</div>
</div>
<a id="gaffc8caabb097d99af8a9a02afdf58428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaffc8caabb097d99af8a9a02afdf58428">&#9670;&nbsp;</a></span>CapacitiveSensorShieldEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CapacitiveSensorShieldEnable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable/Disable CapacitiveSensor shield on XIO11. Enabling the shield causes the capacitance seen on XIO11 to be subtracted from the capacitance measured on all the other XIOs. This is done in hardware prior to sampling thus preserving ADC range. The purpose for this is to remove any stray capacitance from the other XIOs. Please note that XIO11 should not be used for any other operations when the shield is enabled. Also, XIO11 should be set up in analogue mode prior to enabling the shield. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>Enable or disable the shield. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac9ce6244fcd40464128f6f11aa98c2a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac9ce6244fcd40464128f6f11aa98c2a8">&#9670;&nbsp;</a></span>MessageCapacitiveSensorTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="message___8h.html#a51d7b6544fb734b892b35ce3f56a579a">Task</a> MessageCapacitiveSensorTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="message___8h.html#a51d7b6544fb734b892b35ce3f56a579a">Task</a>&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a task to handle touch sensor messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task which will receive the messages. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The old task (or zero). </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
