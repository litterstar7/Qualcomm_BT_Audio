<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Trap API: file.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Trap API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('file_8h.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">file.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga284247c67005abdb84ac9f13b18e4c27"><td class="memItemLeft" align="right" valign="top">FILE_INDEX&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__file.html#ga284247c67005abdb84ac9f13b18e4c27">FileCreate</a> (const char *name, uint16 length)</td></tr>
<tr class="memdesc:ga284247c67005abdb84ac9f13b18e4c27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create file in read-write filesystem.  <a href="group__trapset__file.html#ga284247c67005abdb84ac9f13b18e4c27">More...</a><br /></td></tr>
<tr class="separator:ga284247c67005abdb84ac9f13b18e4c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b796155a06a479f1acba1c118263852"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__file.html#ga2b796155a06a479f1acba1c118263852">FileDelete</a> (FILE_INDEX index)</td></tr>
<tr class="memdesc:ga2b796155a06a479f1acba1c118263852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete file in read-write filesystem.  <a href="group__trapset__file.html#ga2b796155a06a479f1acba1c118263852">More...</a><br /></td></tr>
<tr class="separator:ga2b796155a06a479f1acba1c118263852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c6ee5fa143e456782d2fb8f4930527d"><td class="memItemLeft" align="right" valign="top">FILE_INDEX&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__file.html#ga2c6ee5fa143e456782d2fb8f4930527d">FileFind</a> (FILE_INDEX start, const char *name, uint16 length)</td></tr>
<tr class="memdesc:ga2c6ee5fa143e456782d2fb8f4930527d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access to the read-only file-system.  <a href="group__trapset__file.html#ga2c6ee5fa143e456782d2fb8f4930527d">More...</a><br /></td></tr>
<tr class="separator:ga2c6ee5fa143e456782d2fb8f4930527d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6641c3f57c3f783dd47905bf0c24f1c2"><td class="memItemLeft" align="right" valign="top">const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__file.html#ga6641c3f57c3f783dd47905bf0c24f1c2">FileMap</a> (FILE_INDEX index, uint32 offset, uint32 size)</td></tr>
<tr class="memdesc:ga6641c3f57c3f783dd47905bf0c24f1c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the address of a file specified by its index Returns the address of a read only mapping of the file specified starting at the given byte offset. The returned address has the same alignment guarantees as the underlying filesystem. As the memory map is different between the customer and firmware processors, this address can only be passed into firmware calls that support it. This is currently restricted to BitSerialTransfer() and BitSerialWrite() as the source data address, and <a class="el" href="group__trapset__crypto.html#ga30964b9602684190cc9d903a7b58bff2" title="Encrypt or decrypt data using the AES128-CTR algorithm. Encrypt and decrypt are identical operations ...">CryptoAes128Ctr()</a>/CryptoAes12Cbc() as the source data. <code>index</code> must be a valid file index in a read only filesystem. Mapping files in a writable filesystem is unsupported. <code>offset</code> must be less than the number of bytes in the file, if it's not the function will return NULL. Attempting to map a file that is 0 bytes long will return NULL. If <code>offset</code> + <code>size</code> extends beyond the length of the file the mapping is truncated to the file boundary. The value #FILE_MAP_SIZE_ALL can be passed to the <code>size</code> argument to indicate that the entire file should be mapped. In ADK6 the <code>size</code> parameter is ignored, the entire file is always made readable, this is an implementation detail of this release and must not be relied on. In addition to invalid arguments, this function will return NULL if the flash layout is such that Apps P1 is unable to access the file via the memory map, or the file is unable to be mapped at this particular time. For a given implementation of this API, it may not be possible for the implementation to prevent file mapping pointers from working after the file has been unmapped. Hence, code that incorrectly uses a pointer to a mapped file after unmapping the file may appear to operate successfully. This behaviour must not be relied on as it may vary from file to file and it is subject to change without notice. If the same file is mapped in multiple times at the same offset then the implementation of this API may return different pointers for each map or it may return the same pointer. In either event, the implementation guarantees that the following code will work:  <a href="group__trapset__file.html#ga6641c3f57c3f783dd47905bf0c24f1c2">More...</a><br /></td></tr>
<tr class="separator:ga6641c3f57c3f783dd47905bf0c24f1c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad344a179505817f4f0d095e7e0fca5db"><td class="memItemLeft" align="right" valign="top">FILE_INDEX&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__file.html#gad344a179505817f4f0d095e7e0fca5db">FileParent</a> (FILE_INDEX item)</td></tr>
<tr class="memdesc:gad344a179505817f4f0d095e7e0fca5db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the index of the directory containing this file or directory.  <a href="group__trapset__file.html#gad344a179505817f4f0d095e7e0fca5db">More...</a><br /></td></tr>
<tr class="separator:gad344a179505817f4f0d095e7e0fca5db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga878e5628291b768883e1ded10557c246"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__file.html#ga878e5628291b768883e1ded10557c246">FileRename</a> (const char *old_path, uint16 old_path_len, const char *new_path, uint16 new_path_len)</td></tr>
<tr class="memdesc:ga878e5628291b768883e1ded10557c246"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rename file in read-write filesystem.  <a href="group__trapset__file.html#ga878e5628291b768883e1ded10557c246">More...</a><br /></td></tr>
<tr class="separator:ga878e5628291b768883e1ded10557c246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0467a1b122e444b4ff5dec015019201d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__file.html#ga0467a1b122e444b4ff5dec015019201d">FileSystemUnmount</a> (const char *mount_path)</td></tr>
<tr class="memdesc:ga0467a1b122e444b4ff5dec015019201d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unmount filesystem Used to free up memory on the system processor when the current file operations have been completed. After this call the file system will be mounted again automatically when any trap referencing it is used (such as FileFind or FileCreate).  <a href="group__trapset__file.html#ga0467a1b122e444b4ff5dec015019201d">More...</a><br /></td></tr>
<tr class="separator:ga0467a1b122e444b4ff5dec015019201d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga47a21ef1f814aca7f5252fd500e309f3"><td class="memItemLeft" align="right" valign="top">FILE_TYPE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__file.html#ga47a21ef1f814aca7f5252fd500e309f3">FileType</a> (FILE_INDEX index)</td></tr>
<tr class="memdesc:ga47a21ef1f814aca7f5252fd500e309f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the type of a file specified by its index.  <a href="group__trapset__file.html#ga47a21ef1f814aca7f5252fd500e309f3">More...</a><br /></td></tr>
<tr class="separator:ga47a21ef1f814aca7f5252fd500e309f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1590721c71eea35e0543516739ad0bfa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__file.html#ga1590721c71eea35e0543516739ad0bfa">FileUnmap</a> (const void *addr)</td></tr>
<tr class="memdesc:ga1590721c71eea35e0543516739ad0bfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release access to the address of a file <code>addr</code> should be a currently mapped address previously returned by <a class="el" href="group__trapset__file.html#ga6641c3f57c3f783dd47905bf0c24f1c2" title="Find the address of a file specified by its index Returns the address of a read only mapping of the f...">FileMap()</a>. If <code>addr</code> is set to NULL, <a class="el" href="group__trapset__file.html#ga1590721c71eea35e0543516739ad0bfa" title="Release access to the address of a file addr should be a currently mapped address previously returned...">FileUnmap()</a> will return TRUE without performing an unmap operation. The implementation may validate that unmap operations are only performed on currently mapped pointers and that they are performed the correct number of times when the same file section has been repeatedly mapped. If invalid usage is detected this function will return FALSE. However, for efficiency, the implementation may decide not do detect some invalid uses.  <a href="group__trapset__file.html#ga1590721c71eea35e0543516739ad0bfa">More...</a><br /></td></tr>
<tr class="separator:ga1590721c71eea35e0543516739ad0bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="file_8h.html">file.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
